---
const navLinks = [
  { label: "Home", href: "#home", icon: "ğŸ ", ariaLabel: "Navigate to Home" },
  { label: "Programs", href: "#programs", icon: "ğŸ", ariaLabel: "View Programs" },
  { label: "Coaches", href: "#trainers", icon: "ğŸ“", ariaLabel: "Meet the Coaches" },
  { label: "About Us", href: "#about", icon: "â„¹ï¸", ariaLabel: "Learn About Us" },
  { label: "Gallery", href: "#gallery", icon: "ğŸ“¸", ariaLabel: "View Gallery" },
  { label: "Join Us", href: "#contact", icon: "ğŸ“", ariaLabel: "Join Us - Contact Form" },
];
---

<header
  id="mainNav"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-700 ease-[cubic-bezier(0.4,0,0.2,1)] bg-transparent backdrop-blur-sm"
>
  <nav
    class="container mx-auto px-4 md:px-6 py-3 md:py-4 flex items-center justify-between gap-4"
  >
    <!-- Logo -->
    <a href="#home" class="flex items-center gap-3 group flex-shrink-0">
      <img
        src="/assets/images/Seams Logo.png"
        alt="Seam Cricket Academy"
        class="h-10 md:h-14 w-auto transition-all duration-500 group-hover:drop-shadow-[0_0_15px_rgba(255,215,0,0.5)]"
      />
      <!-- Tagline - Desktop only -->
      <span
        class="hidden lg:block text-white/60 text-sm font-light tracking-wide border-l border-white/20 pl-3"
      >
        Train Hard. Play Smart. Rise Higher.
      </span>
    </a>

    <!-- Navigation Links (Desktop) -->
    <div class="hidden md:block">
      <ul class="flex items-center gap-8">
        {
          navLinks.map((link) => (
            <li>
              <a
                href={link.href}
                class="text-white/70 hover:text-white font-light transition-all duration-300 text-sm tracking-[0.15em] uppercase relative group py-2"
              >
                <span class="relative z-10">{link.label}</span>
                <span class="absolute inset-x-0 bottom-0 h-px bg-gradient-to-r from-transparent via-neon to-transparent scale-x-0 group-hover:scale-x-100 transition-transform duration-500 ease-out" />
              </a>
            </li>
          ))
        }
      </ul>
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-btn"
      class="md:hidden text-white p-2 focus:outline-none"
      aria-label="Toggle Menu"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div
    id="mobile-menu"
    class="fixed inset-0 z-40 bg-void/95 backdrop-blur-xl transform translate-x-full transition-transform duration-300 md:hidden flex flex-col items-center justify-center"
  >
    <button
      id="close-menu-btn"
      class="absolute top-6 right-6 text-white/50 hover:text-white p-2"
    >
      <svg
        class="w-8 h-8"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>

    <ul class="flex flex-col items-center gap-6">
      {
        navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class="mobile-link flex flex-col items-center gap-2 text-white/80 hover:text-neon transition-colors group"
              aria-label={link.ariaLabel}
            >
              <span class="text-4xl group-hover:scale-110 transition-transform duration-300" aria-hidden="true">
                {link.icon}
              </span>
              <span class="text-sm font-light tracking-wider uppercase">
                {link.label}
              </span>
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</header>

<style>
  /* Hide scrollbar but allow scrolling */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>

<script>
  // Auto-hide navbar on scroll
  const nav = document.getElementById("mainNav");
  let lastScrollY = window.scrollY;

  window.addEventListener("scroll", () => {
    const currentScrollY = window.scrollY;
    if (currentScrollY > lastScrollY && currentScrollY > 100) {
      nav?.classList.add("-translate-y-full", "opacity-0");
    } else {
      nav?.classList.remove("-translate-y-full", "opacity-0");
    }
    lastScrollY = currentScrollY;
  });

  // Active Section Tracker & URL Updater
  const sections = document.querySelectorAll('section[id], div[id="home"]');
  const navLinks = document.querySelectorAll("nav ul li a");

  const observerOptions = {
    root: null,
    rootMargin: "-20% 0px -70% 0px", // Trigger when section is near top
    threshold: 0,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        const id = entry.target.getAttribute("id");
        if (id) {
          // Update URL without jumping
          history.replaceState(null, "", `#${id}`);

          // Update Active State
          navLinks.forEach((link) => {
            link.classList.remove("text-neon", "font-bold");
            link.classList.add("text-white/70");

            // Check if href matches current id
            if (link.getAttribute("href") === `#${id}`) {
              link.classList.remove("text-white/70");
              link.classList.add("text-neon", "font-bold");
            }
          });
        }
      }
    });
  }, observerOptions);

  sections.forEach((section) => observer.observe(section));

  // Mobile Menu Logic
  const mobileMenuBtn = document.getElementById("mobile-menu-btn");
  const closeMenuBtn = document.getElementById("close-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  const mobileLinks = document.querySelectorAll(".mobile-link");

  function toggleMenu() {
    mobileMenu?.classList.toggle("translate-x-full");
    document.body.classList.toggle("overflow-hidden");
  }

  mobileMenuBtn?.addEventListener("click", toggleMenu);
  closeMenuBtn?.addEventListener("click", toggleMenu);

  mobileLinks.forEach((link) => {
    link.addEventListener("click", toggleMenu);
  });
</script>
